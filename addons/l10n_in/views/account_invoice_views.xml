<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="invoice_form_inherit_l10n_in" model="ir.ui.view">
        <field name="name">account.move.form.inherit.l10n.in</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_move_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='company_id']" position="after">
                <field name="l10n_in_company_country_code" invisible="1"/>
            </xpath>
            <xpath expr="//field[@name='ref']" position="after">
                <field name="l10n_in_gst_treatment"
                    attrs="{'invisible':['|',('l10n_in_company_country_code','!=','IN'),('type', '=', 'entry')],'required':[('l10n_in_company_country_code','=','IN'),('type','!=','entry')]}"/>
                <field name="l10n_in_gstin"
                    attrs="{'invisible':['|',('l10n_in_company_country_code','!=','IN'),'|',('l10n_in_gst_treatment','in',['consumer','unregistered','overseas']),('type','=','entry')],'required':[('l10n_in_gst_treatment','in',['regular','composition','special_economic_zone','deemed_export']),('l10n_in_company_country_code','=', 'IN'),('type', '!=', 'entry')]}"/>
                <div class="o_td_label">
                    <label for="l10n_in_place_of_supply_id"
                        attrs="{'invisible':['|',('l10n_in_company_country_code','!=','IN'),'|',('type', 'in',['in_invoice','in_refund','entry']),('l10n_in_gst_treatment','=','overseas')]}"/>
                    <label for="l10n_in_place_of_supply_id" string="Destination of Supply"
                        attrs="{'invisible':['|',('l10n_in_company_country_code','!=','IN'),('type','not in',['in_invoice','in_refund'])]}"/>
                </div>
                <field name="l10n_in_place_of_supply_id" nolabel="1"
                    attrs="{'invisible':['|',('l10n_in_company_country_code','!=','IN'),'|',('type', '=', 'entry'),'&amp;',('l10n_in_gst_treatment','=','overseas'),('type','not in',['in_invoice','in_refund'])], 'required':[('l10n_in_company_country_code','=','IN'),('type','!=','entry'),'|',('l10n_in_gst_treatment','!=','overseas'),('type','in',['in_invoice','in_refund'])]}"
                    options='{"no_create_edit": True, "no_open": True}'/>
            </xpath>
            <xpath expr="//page[@id='other_tab']/group[@id='other_tab_group']/group[@name='payments_info_group']" position="after">
                <group string="Export India" attrs="{'invisible': ['|',
                        ('l10n_in_gst_treatment', 'not in', ['overseas','deemed_export']),
                        ('type', 'not in', ['out_invoice','out_refund']),
                    ]}">
                    <field name="l10n_in_shipping_bill_number"/>
                    <field name="l10n_in_shipping_bill_date"/>
                    <field name="l10n_in_shipping_port_code_id"/>
                </group>
                <group string="Import India" attrs="{'invisible': ['|',
                        ('l10n_in_gst_treatment', 'not in', ['overseas','special_economic_zone']),
                        ('type', 'not in', ['in_invoice','in_refund']),
                    ]}">
                    <field name="l10n_in_shipping_bill_number" string="Bill of Entry Number"/>
                    <field name="l10n_in_shipping_bill_date" string="Bill of Entry Date"/>
                    <field name="l10n_in_shipping_port_code_id"/>
                </group>
            </xpath>
            <xpath expr="//field[@name='partner_id']" position="after">
                <field name="l10n_in_reseller_partner_id"
                       groups="l10n_in.group_l10n_in_reseller"
                       attrs="{'invisible': ['|' ,('type', 'not in', ('out_invoice', 'out_refund')),('l10n_in_company_country_code','!=', 'IN'), ('type', '=', 'entry')]}"
                       />
            </xpath>
        </field>
    </record>
</odoo>
